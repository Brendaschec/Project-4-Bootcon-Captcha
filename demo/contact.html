<!DOCTYPE html>
<html>

<body>
  <form id="contactForm">
    <div>
      <label>First name</label>
      <input id="firstName" required />
    </div>

    <div>
      <label>Last name</label>
      <input id="lastName" required />
    </div>

    <div>
      <label>Email address</label>
      <input id="emailAddress" required type="email" />
    </div>

    <div>
      <img src="/apps/captcha/new_image" alt="Image failed to load.">
    </div>
    <div>
      <input placeholder="Enter the Capcha solution here" id="capchaSolution" required />
    </div>
    <button>Submit</button>
  </form>

  <div id="output"></div>
  <script>
    const contactForm = document.getElementById("contactForm");
    const firstName = document.getElementById("firstName");
    const lastName = document.getElementById("lastName");
    const emailAddress = document.getElementById("emailAddress");
    const capchaSolution = document.getElementById("capchaSolution");
    const output = document.getElementById("output");

    contactForm.addEventListener("submit", handleSubmit);
    async function handleSubmit(e) {
      e.preventDefault();
      const firstNameValue = firstName.value;
      const lastNameValue = lastName.value;
      const emailAddressValue = emailAddress.value;
      const capchaSolutionValue = capchaSolution.value;
      const data = await sendRequest(firstNameValue, lastNameValue, emailAddressValue, capchaSolutionValue)
      output.textContent = data;
    }
    async function sendRequest(firstNameValue, lastNameValue, emailAddressValue, capchaSolutionValue) {
      // const response = await fetch("/apps/captcha/contact", {
      //   method: "POST",
      //   body: `captchaAnswer=${capchaSolutionValue}&firstName=${firstNameValue}&lastName=${lastNameValue}&emailAddress=${emailAddressValue}`,
      //   headers: {
      //     "Content-Type": "application/x-www-form-urlencoded"
      //   }
      // })
      // const responseData = await response.text();
      // return responseData;

      return "Wrong capcha!"
      return "Success!"
    }
  </script>
</body>

</html>


<!-- Resources and References -->