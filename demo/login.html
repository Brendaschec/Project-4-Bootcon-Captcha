<!DOCTYPE html>
<html>

<body>
  <form id="loginForm">
    <div>
      <label>Username</label>
      <input id="username" required />
    </div>

    <div>
      <label>Password</label>
      <input id="password" required type="password" />
    </div>

    <div>
      <img src="/apps/captcha/new_image" alt="Image failed to load."/>
    </div>
    <div>
      <input placeholder="Enter the Capcha solution here" id="capchaSolution" required />
    </div>
    <button>Submit</button>
  </form>

  <div id="output"></div>
  <script>
    const loginForm = document.getElementById("loginForm");
    const username = document.getElementById("username");
    const password = document.getElementById("password");
    const capchaSolution = document.getElementById("capchaSolution");
    const output = document.getElementById("output");

    loginForm.addEventListener("submit", handleSubmit);
    async function handleSubmit(e) {
      e.preventDefault();
      const usernameValue = username.value;
      const passwordValue = password.value;
      const capchaSolutionValue = capchaSolution.value;
      const data = await sendRequest(usernameValue, passwordValue, capchaSolutionValue)
      output.textContent = data;
    }
    async function sendRequest(usernameValue, passwordValue, capchaSolutionValue) {
      // const response = await fetch("/apps/captcha/login", {
      //   method: "POST",
      //   body: `captchaAnswer=${capchaSolutionValue}&username=${usernameValue}&password=${passwordValue}`,
      //   headers: {
      //     "Content-Type": "application/x-www-form-urlencoded"
      //   }
      // })
      // const responseData = await response.text();
      // return responseData;
      return "Wrong credentials!"
      return "Wrong capcha!"
      return "Success!"
    }
  </script>
</body>

</html>


<!-- Resources and References -->